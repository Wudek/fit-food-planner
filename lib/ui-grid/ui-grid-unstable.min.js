/*! ui-grid - v2.0.7-e85e532 - 2014-03-20
* Copyright (c) 2014 ; Licensed MIT */
!function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,events:{GRID_SCROLL:"uiGridScroll",GRID_SCROLLING:"uiGridScrolling"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}})}(),function(){"use strict";angular.module("ui.grid").directive("uiGridBody",["$log","$document","$timeout","uiGridConstants","gridUtil",function(a,b,c,d,e){return{replace:!0,templateUrl:"ui-grid/ui-grid-body",require:"?^uiGrid",scope:!1,link:function(f,g,h,i){function j(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault();var b,c,e,g;e=a.targetTouches[0].screenX,g=a.targetTouches[0].screenY,b=-(e-o),c=-(g-n),r=1>c?-1:1,s=1>b?-1:1,c*=2,b*=2;var h={target:a.target};if(0!==c){var j=(p+c)/(i.grid.getCanvasHeight()-i.grid.getViewportHeight());j>1?j=1:0>j&&(j=0),h.y={percentage:j,pixels:c}}if(0!==b){var k=(q+b)/(i.grid.getCanvasWidth()-i.grid.getViewportWidth());k>1?k=1:0>k&&(k=0),h.x={percentage:k,pixels:b}}f.$broadcast(d.events.GRID_SCROLL,h)}function k(a){function e(){c(function(){var b={target:a.target};if(0!==x){var c=(i.viewport[0].scrollTop+x)/(i.grid.getCanvasHeight()-i.grid.getViewportHeight());b.y={percentage:c,pixels:x}}if(0!==y){var g=(i.viewport[0].scrollLeft+y)/(i.grid.getCanvasWidth()-i.grid.getViewportWidth());b.x={percentage:g,pixels:y}}f.$broadcast(d.events.GRID_SCROLL,b),w-=1,x/=2,y/=2,w>0?e():i.scrollbars.forEach(function(a){a.removeClass("ui-grid-scrollbar-visible"),a.removeClass("ui-grid-scrolling")})},v)}a.originalEvent&&(a=a.originalEvent),a.preventDefault(),b.unbind("touchmove",j),b.unbind("touchend",k),b.unbind("touchcancel",k);var g=i.viewport[0].scrollTop,h=i.viewport[0].scrollTop,l=Math.abs(g-p),n=Math.abs(h-q),o=new Date-m,t=l/o,u=n/o,v=63,w=8,x=120*r*t,y=120*s*u;e()}if(void 0===i)throw new Error("[ui-grid-body] uiGridCtrl is undefined!");a.debug("ui-grid-body link"),i.canvas=angular.element(g[0].getElementsByClassName("ui-grid-canvas")[0]),i.viewport=angular.element(g[0].getElementsByClassName("ui-grid-viewport")[0]),i.viewportOuterHeight=e.outerElementHeight(i.viewport[0]),i.viewportOuterWidth=e.outerElementWidth(i.viewport[0]),i.viewport[0].scrollTop=0,i.viewport[0].scrollLeft=0,i.prevScrollTop=0,i.prevScrollLeft=0,i.prevRowScrollIndex=0,i.prevColumnScrollIndex=0,i.currentTopRow=0,i.currentFirstColumn=0,i.adjustScrollVertical=function(a,b,c){(i.prevScrollTop!==a||c)&&(a=i.grid.getCanvasHeight()*b,i.adjustRows(a,b),i.prevScrollTop=a)},i.adjustRows=function(a,b){var c=i.grid.minRowsToRender(),d=i.grid.rows.length-c;i.maxRowIndex=d;var e=(i.prevRowScrollIndex,Math.ceil(Math.min(d,d*b)));e>d&&(e=d);var f=[];if(i.grid.rows.length>i.grid.options.virtualizationThreshold){if(i.prevScrollTop<a&&e<i.prevRowScrollIndex+i.grid.options.scrollThreshold&&d>e)return;if(i.prevScrollTop>a&&e>i.prevRowScrollIndex-i.grid.options.scrollThreshold&&d>e)return;var g=Math.max(0,e-i.grid.options.excessRows),h=Math.min(i.grid.rows.length,e+c+i.grid.options.excessRows);f=[g,h]}else{var j=i.grid.rows.length;f=[0,Math.max(j,c+i.grid.options.excessRows)]}v(f),i.prevRowScrollIndex=e},i.adjustScrollHorizontal=function(a,b,c){(i.prevScrollLeft!==a||c)&&(a=i.grid.getCanvasWidth()*b,i.adjustColumns(a,b),i.prevScrollLeft=a)},i.adjustColumns=function(a,b){var c=i.grid.minColumnsToRender(),d=i.grid.columns.length-c;i.maxColumnIndex=d;var e=Math.ceil(Math.min(d,d*b));e>d&&(e=d);var f=[];if(i.grid.columns.length>i.grid.options.columnVirtualizationThreshold&&i.grid.getCanvasWidth()>i.grid.getViewportWidth()){if(i.prevScrollLeft<a&&e<i.prevColumnScrollIndex+i.grid.options.horizontalScrollThreshold&&d>e)return;if(i.prevScrollLeft>a&&e>i.prevColumnScrollIndex-i.grid.options.horizontalScrollThreshold&&d>e)return;var g=Math.max(0,e-i.grid.options.excessColumns),h=Math.min(i.grid.columns.length,e+c+i.grid.options.excessColumns);f=[g,h]}else{var j=i.grid.columns.length;f=[0,Math.max(j,c+i.grid.options.excessColumns)]}w(f),i.prevColumnScrollIndex=e};var l=f.$on(d.events.GRID_SCROLL,function(a,b){if(i.prevScrollArgs=b,b.y){var c=i.grid.getCanvasHeight()-i.grid.getViewportHeight();i.grid.horizontalScrollbarHeight&&i.grid.horizontalScrollbarHeight>0&&(c+=i.grid.horizontalScrollbarHeight);var d,e=i.viewport[0].scrollTop;if("undefined"!=typeof b.y.percentage&&void 0!==b.y.percentage)d=b.y.percentage;else{if("undefined"==typeof b.y.pixels||void 0===b.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=b.y.percentage=(e+b.y.pixels)/c}var f=Math.max(0,d*c);i.viewport[0].scrollTop=f,i.grid.options.offsetTop=f,i.prevScrollArgs.y.pixels=f-e}if(b.x){var g,h=i.grid.getCanvasWidth()-i.grid.getViewportWidth(),j=i.viewport[0].scrollLeft;if("undefined"!=typeof b.x.percentage&&void 0!==b.x.percentage)g=b.x.percentage;else{if("undefined"==typeof b.x.pixels||void 0===b.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");g=b.x.percentage=(j+b.x.pixels)/h}var k=Math.max(0,g*h);i.viewport[0].scrollLeft=k,i.headerViewport&&(i.headerViewport.scrollLeft=k),i.grid.options.offsetLeft=k,i.prevScrollArgs.x.pixels=k-j}});g.bind("wheel mousewheel DomMouseScroll MozMousePixelScroll",function(a){a.preventDefault();var b=e.normalizeWheelEvent(a),c={target:g};if(0!==b.deltaY){var d=-120*b.deltaY,f=(i.viewport[0].scrollTop+d)/(i.grid.getCanvasHeight()-i.grid.getViewportHeight());0>f?f=0:f>1&&(f=1),c.y={percentage:f,pixels:d}}if(0!==b.deltaX){var h=-120*b.deltaX,j=(i.viewport[0].scrollLeft+h)/(i.grid.getCanvasWidth()-i.grid.getViewportWidth());0>j?j=0:j>1&&(j=1),c.x={percentage:j,pixels:h}}i.fireScrollingEvent(c)});var m,n=0,o=0,p=0,q=0,r=1,s=1;e.isTouchEnabled()&&g.bind("touchstart",function(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),i.scrollbars.forEach(function(a){a.addClass("ui-grid-scrollbar-visible"),a.addClass("ui-grid-scrolling")}),m=new Date,n=a.targetTouches[0].screenY,o=a.targetTouches[0].screenX,p=i.viewport[0].scrollTop,q=i.viewport[0].scrollLeft,b.on("touchmove",j),b.on("touchend touchcancel",k)}),g.bind("keydown",function(){}),g.bind("$destroy",function(){l(),g.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){g.unbind(a)})});var t=function(a){i.grid.setRenderedRows(a),f.grid.refreshCanvas()},u=function(a){i.grid.setRenderedColumns(a),x(),f.grid.refreshCanvas()},v=function(a){var b=i.grid.rows.slice(a[0],a[1]);i.currentTopRow=a[0],t(b)},w=function(a){var b=i.grid.columns.slice(a[0],a[1]);i.currentFirstColumn=a[0],u(b)};f.rowStyle=function(a){var b={};if(0===a&&0!==i.currentTopRow){var c=i.currentTopRow*i.grid.options.rowHeight;b["margin-top"]=c+"px"}return 0!==i.currentFirstColumn&&(b["margin-left"]=i.columnOffset+"px"),b};var x=function(){for(var a=0,b=0;b<i.currentFirstColumn;b++)a+=f.grid.columns[b].drawnWidth;i.columnOffset=a};f.columnStyle=function(a){if(0===a&&0!==i.currentFirstColumn){var b=i.columnOffset;return{"margin-left":b+"px"}}return null}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){var d="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(){return{pre:function(b,e){var f=b.grid.options.groupPanelTemplate||d;c.getTemplate(f).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b){b.bind("$destroy",function(){})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeaderCell",["$log","$parse",function(){var a={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:"?^uiGrid",templateUrl:"ui-grid/uiGridHeaderCell",replace:!0,link:function(a,b,c,d){a.grid=d.grid}};return a}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$log","$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){var f="ui-grid/ui-grid-header";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,d,g){var h=a.grid.options.headerTemplate?a.grid.options.headerTemplate:f;e.getTemplate(h).then(function(d){var e=angular.element(d),f=c(e)(a);if(b.append(f),g){var h=b[0].getElementsByClassName("ui-grid-header-viewport")[0];h&&(g.headerViewport=h)}})},post:function(b,c,d,f){function g(){var a=[],c=[],d=0,g=f.grid.getViewportWidth();"undefined"!=typeof f.grid.verticalScrollbarWidth&&void 0!==f.grid.verticalScrollbarWidth&&f.grid.verticalScrollbarWidth>0&&(g+=f.grid.verticalScrollbarWidth);var h,i=0,j=0,k="";f.grid.columns.forEach(function(b){if(b.visible){var f=!1;angular.isNumber(b.width)||(f=isNaN(b.width)?e.endsWith(b.width,"%"):!1),angular.isString(b.width)&&-1!==b.width.indexOf("*")?(d=parseInt(d+b.width.length,10),a.push(b)):f?c.push(b):angular.isNumber(b.width)&&(i=parseInt(i+b.width,10),j=parseInt(j,10)+parseInt(b.width,10),b.drawnWidth=b.width)}});var l,m,n,o=g-i;if(c.length>0){for(l=0;l<c.length;l++){m=c[l];var p=parseInt(m.width.replace(/%/g,""),10)/100;n=parseInt(p*o,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,j+=n,m.drawnWidth=n,c.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,j+=n,m.drawnWidth=n,c.splice(l,1))}c.forEach(function(a){var b=parseInt(a.width.replace(/%/g,""),10)/100,c=parseInt(b*o,10);j+=c,a.drawnWidth=c})}if(a.length>0){var q=parseInt(o/d,10);for(l=0;l<a.length;l++)m=a[l],n=parseInt(q*m.width.length,10),m.colDef.minWidth&&n<m.colDef.minWidth?(n=m.colDef.minWidth,o-=n,d--,j+=n,m.drawnWidth=n,h=m,a.splice(l,1)):m.colDef.maxWidth&&n>m.colDef.maxWidth&&(n=m.colDef.maxWidth,o-=n,d--,j+=n,m.drawnWidth=n,a.splice(l,1));q=parseInt(o/d,10),a.forEach(function(a){var b=parseInt(q*a.width.length,10);j+=b,a.drawnWidth=b})}var r=g-parseInt(j,10);if(r>0&&j>0&&g>j){var s=!1;if(f.grid.columns.forEach(function(a){a.width&&!angular.isNumber(a.width)&&(s=!0)}),s)for(var t=function(a){r>0&&(a.drawnWidth=a.drawnWidth+1,j+=1,r--)};r>0;)f.grid.columns.forEach(t)}g>j&&(j=g),f.grid.columns.forEach(function(a){k=k+" .grid"+f.grid.id+" .col"+a.index+" { width: "+a.drawnWidth+"px; }"}),b.columnStyles=k,f.grid.verticalScrollbarWidth&&(j+=f.grid.verticalScrollbarWidth),f.grid.canvasWidth=parseInt(j,10)}if(void 0===f)throw new Error("[ui-grid-header] uiGridCtrl is undefined!");if(a.debug("ui-grid-header link"),f){f.header=c;var h=c[0].getElementsByClassName("ui-grid-header-viewport")[0];h&&(f.headerViewport=h)}f&&f.grid.registerStyleComputation({priority:5,func:g})}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridNativeScrollbar",["$log","$timeout","$document","uiGridConstants","gridUtil",function(a,b,c,d,e){var f=e.getScrollbarWidth();return f=f>0?f:17,{scope:{type:"@"},require:"?^uiGrid",link:function(a,b,c,g){function h(){var a=g.grid.getCanvasHeight();g.grid.nativeVerticalScrollbarStyles=".grid"+g.grid.id+" .ui-grid-native-scrollbar.vertical .contents { height: "+a+"px; }",n=a}function i(){var a=g.grid.getCanvasWidth();g.grid.nativeHorizontalScrollbarStyles=".grid"+g.grid.id+" .ui-grid-native-scrollbar.horizontal .contents { width: "+a+"px; }",n=a}function j(){if("vertical"===a.type){var c=b[0].scrollTop,d=g.grid.getCanvasHeight()-g.grid.getViewportHeight();g.grid.horizontalScrollbarHeight&&g.grid.horizontalScrollbarHeight>0&&(d-=g.grid.horizontalScrollbarHeight);var e=c/d;e>1&&(e=1),0>e&&(e=0);var f={target:b,y:{percentage:e}};a.scrollSource?a.scrollSource=null:g.fireScrollingEvent(f),m=c}else if("horizontal"===a.type){var h=b[0].scrollLeft,i=g.grid.getCanvasWidth()-g.grid.getViewportWidth(),j=h/i,k={target:b,x:{percentage:j}};a.scrollSource?a.scrollSource=null:g.fireScrollingEvent(k),m=h}}function k(c,d){if(!d.target||d.target!==b&&!d.target.hasClass("ui-grid-native-scrollbar"))if(a.scrollSource=d.target,"vertical"===a.type){if(d.y&&"undefined"!=typeof d.y.percentage&&void 0!==d.y.percentage){var e=g.grid.getCanvasHeight()-g.grid.getViewportHeight(),f=Math.max(0,d.y.percentage*e);b[0].scrollTop=f}}else if("horizontal"===a.type&&d.x&&"undefined"!=typeof d.x.percentage&&void 0!==d.x.percentage){var h=g.grid.getCanvasWidth()-g.grid.getViewportWidth(),i=Math.max(0,d.x.percentage*h);b[0].scrollLeft=i}}var l=angular.element('<div class="contents">&nbsp;</div>');b.addClass("ui-grid-native-scrollbar");var m,n=0;"vertical"===a.type?(b.css("width",f+"px"),b.addClass("vertical"),g.grid.verticalScrollbarWidth=f,m=b[0].scrollTop):"horizontal"===a.type&&(b.css("height",f+"px"),b.addClass("horizontal"),g.grid.horizontalScrollbarHeight=f,m=b[0].scrollLeft),b.append(l),"vertical"===a.type?n=e.elementHeight(b):"horizontal"===a.type&&(n=e.elementWidth(b)),g.grid.options.enableNativeScrolling&&("vertical"===a.type?g.grid.registerStyleComputation({priority:6,func:h}):"horizontal"===a.type&&g.grid.registerStyleComputation({priority:6,func:i})),a.scrollSource=null,b.on("scroll",j),b.on("$destroy",function(){b.off("scroll")});var o=a.$on(d.events.GRID_SCROLL,k);a.$on("$destroy",o)}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["$log",function(){return{replace:!0,templateUrl:"ui-grid/ui-grid-row",require:"?^uiGrid",scope:{row:"=uiGridRow",rowIndex:"="},compile:function(){return{pre:function(){},post:function(a,b,c,d){if(void 0===d)throw new Error("[ui-grid-row] uiGridCtrl is undefined!");a.grid=d.grid,a.getCellValue=d.getCellValue}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridScrollbar",["$log","$document","uiGridConstants","gridUtil",function(a,b,c,d){return{replace:!0,templateUrl:"ui-grid/ui-grid-scrollbar",require:"?^uiGrid",scope:{type:"@"},link:function(e,f,g,h){function i(){r=!0,f.addClass("ui-grid-scrollbar-visible"),b.on("mouseup",o)}function j(){r=!1,h.grid.isScrolling()||f.removeClass("ui-grid-scrollbar-visible")}function k(){var a=Math.floor(Math.max(35,h.grid.getViewportHeight()/h.grid.getCanvasHeight()*h.grid.getViewportHeight()));h.grid.verticalScrollbarStyles=".grid"+h.grid.id+" .ui-grid-scrollbar-vertical { height: "+a+"px; }"}function l(){var a=35,b=Math.floor(Math.max(a,h.grid.getViewportWidth()/h.grid.getCanvasWidth()*h.grid.getViewportWidth()));b=isNaN(b)?a:b,h.grid.horizontalScrollbarStyles=".grid"+h.grid.id+" .ui-grid-scrollbar-horizontal { width: "+b+"px; }"}function m(a){a.preventDefault(),h.grid.setScrolling(!0),f.addClass(q),y=t(),u=a.screenY-w,v=a.screenX-x,b.on("mousemove",n),b.on("mouseup",o)}function n(a){w=a.screenY-u,x=a.screenX-v;var b={target:f};if("vertical"===e.type){0>w&&(w=0),w>y&&(w=y);var d=w/y;b.y={percentage:d,pixels:w}}else if("horizontal"===e.type){0>x&&(x=0),x>y&&(x=y);var g=x/y;b.x={percentage:g,pixels:x}}e.$emit(c.events.GRID_SCROLL,b)}function o(){f.removeClass(q),r||f.removeClass("ui-grid-scrollbar-visible"),h.grid.setScrolling(!1),b.off("mousemove",n),b.off("mouseup",o)}var p=this;if(void 0===h)throw new Error("[ui-grid-scrollbar] uiGridCtrl is undefined!");a.debug("ui-grid-scrollbar link",e.type),h.scrollbars.push(f),"vertical"===e.type?f.addClass("ui-grid-scrollbar-vertical"):"horizontal"===e.type&&(h.horizontalScrollbar=p,f.addClass("ui-grid-scrollbar-horizontal"));var q;g.$observe("scrollingClass",function(a){a&&(q=a)});var r;h.grid.element.on("mouseenter",i),h.grid.element.on("mouseleave",j),"vertical"===e.type?h.grid.registerStyleComputation({priority:10,func:k}):"horizontal"===e.type&&h.grid.registerStyleComputation({priority:10,func:l}),e.showScrollbar=function(){return"vertical"===e.type?h.grid.getCanvasHeight()>h.grid.getViewportHeight():"horizontal"===e.type?h.grid.getCanvasWidth()>h.grid.getViewportWidth():void 0};var s=function(){return"vertical"===e.type?d.elementHeight(f,"margin"):"horizontal"===e.type?d.elementWidth(f,"margin"):void 0},t=function(){return"vertical"===e.type?h.grid.getViewportHeight()-s():"horizontal"===e.type?h.grid.getViewportWidth()-s():void 0},u=0,v=0,w=0,x=0,y=t();f.on("mousedown",m);var z=e.$on(c.events.GRID_SCROLL,function(a,b){var c;if("vertical"===e.type){if(!b.y)return;c=b.y.percentage}else if("horizontal"===e.type){if(!b.x)return;c=b.x.percentage}0>c&&(c=0),c>1&&(c=1),y=t();var d=c*y;"vertical"===e.type?(w=d,f.css({top:w+"px"})):(x=d,f.css({left:x+"px"}))});f.on("$destroy",function(){z(),b.off("mousemove",n),b.off("mouseup",o),f.unbind("mousedown"),h.grid.element.off("mouseenter",i),h.grid.element.off("mouseleave",j)})}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["$log","$interpolate",function(a,b){return{link:function(c,d){a.debug("ui-grid-style link");var e=b(d.text(),!0);e&&c.$watch(e,function(a){d.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["$log","$document","$timeout","uiGridConstants","gridUtil",function(){return{require:"?^uiGrid",scope:!1,link:function(a,b,c,d){if(void 0===d)throw new Error("[ui-grid-body] uiGridCtrl is undefined!");b.on("scroll",function(){var a=b[0].scrollTop,c=b[0].scrollLeft;if(c!==d.prevScrollLeft){var e=(c-d.prevScrollLeft,d.grid.getCanvasWidth()-d.grid.getViewportWidth()),f=c/e;d.adjustScrollHorizontal(c,f)}if(a!==d.prevScrollTop){var g=(a-d.prevScrollTop,d.grid.getCanvasHeight()-d.grid.getViewportHeight()),h=a/g;h>1&&(h=1),0>h&&(h=0),d.adjustScrollVertical(a,h)}})}}}])}(),function(){"use strict";angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","$log","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){a.forEach(function(a){var b=a.cellTemplate.replace(g.COL_FIELD,"getCellValue(row, col)"),c=l(b);a.compiledElementFn=c})}function n(b){d.debug("dataWatch fired");var g=[];b&&(c.uiGridColumns||0!==o.grid.options.columnDefs.length||(o.grid.options.columnDefs=e.getColumnsFromData(b)),g.push(o.grid.buildColumns()),f.all(g).then(function(){if(m(a.grid.columns),d.debug("Modifying rows"),o.grid.modifyRows(b),o.viewport){var c=o.viewport[0].scrollTop,e=o.viewport[0].scrollLeft;o.adjustScrollVertical(c,0,!0),o.adjustScrollHorizontal(e,0,!0)}a.$evalAsync(function(){o.refreshCanvas(!0)})}))}d.debug("ui-grid controller");var o=this;o.grid=i.createGrid(),angular.extend(o.grid.options,a.uiGrid),a.grid=o.grid,a.groupings=[],c.uiGridColumns?c.$observe("uiGridColumns",function(b){o.grid.options.columnDefs=b,o.grid.buildColumns().then(function(){m(a.grid.columns),o.refreshCanvas(!0)})}):o.grid.options.columnDefs.length>0;var p;p=angular.isString(a.uiGrid.data)?a.$parent.$watchCollection(a.uiGrid.data,n):a.$parent.$watchCollection(function(){return a.uiGrid.data},n);var q=a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},function(b,c){b&&b!==c&&(o.grid.options.columnDefs=b,o.grid.buildColumns().then(function(){m(a.grid.columns),o.refreshCanvas(!0)}))});a.$on("$destroy",function(){p(),q()}),a.$watch(function(){return o.grid.styleComputations},function(){o.refreshCanvas(!0)}),a.grid.refreshCanvas=o.refreshCanvas=function(b){b&&o.grid.buildStyles(a);var c=f.defer();return j(o.header?function(){o.grid.headerHeight=e.outerElementHeight(o.header),c.resolve()}:function(){c.resolve()}),c.promise};var r={};o.getCellValue=function(a,b){return r[b.colDef.name]||(r[b.colDef.name]=k(a.getEntityQualifiedColField(b))),r[b.colDef.name](a)},o.fireScrollingEvent=function(b){a.$broadcast(g.events.GRID_SCROLL,b)}}]),angular.module("ui.grid").directive("uiGrid",["$log","$compile","$templateCache","gridUtil",function(a,b,c,d){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,controller:"uiGridController",compile:function(){return{post:function(b,c,e,f){a.debug("ui-grid postlink"),f.grid.element=c,f.grid.gridWidth=b.gridWidth=d.elementWidth(c),f.grid.canvasWidth=f.grid.gridWidth,f.grid.gridHeight=b.gridHeight=d.elementHeight(c),f.scrollbars=[],f.refreshCanvas()}}}}}]),angular.module("ui.grid").directive("uiGridCell",["$compile","uiGridConstants","$log","$parse",function(a,b){var c={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(c,d,e,f){if(f){var g=c.col.compiledElementFn;c.getCellValue=f.getCellValue,g(c,function(a){d.append(a)})}else{var h=c.col.cellTemplate.replace(b.COL_FIELD,"getCellValue(row,col)"),i=a(h)(c);d.append(i)}}}}};return c}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil",function(a){function b(a,b){var c=this;a.index=b,c.updateColumnDef(a)}return b.prototype.updateColumnDef=function(b,c){var d=this;if(d.colDef=b,d.index="undefined"==typeof c?b.index:c,void 0===b.name)throw new Error("colDef.name is required for column at index "+d.index);var e="Cannot parse column width '"+b.width+"' for column named '"+b.name+"'";if(a.isNullOrUndefined(b.width))d.width="*";else if(angular.isNumber(b.width))d.width=b.width;else if(a.endsWith(b.width,"%")){var f=b.width.replace(/%/g,""),g=parseInt(f,10);if(isNaN(g))throw new Error(e);d.width=b.width}else if(b.width.match(/^(\d+)$/))d.width=parseInt(b.width.match(/^(\d+)$/)[1],10);else if(!b.width.match(/^\*+$/))throw new Error(e);d.minWidth=b.minWidth?b.minWidth:50,d.maxWidth=b.maxWidth?b.maxWidth:9e3,d.field=void 0===b.field?b.name:b.field,d.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName,d.cellClass=b.cellClass,d.cellFilter=b.cellFilter?b.cellFilter:"",d.visible=a.isNullOrUndefined(b.visible)||b.visible,d.headerClass=b.headerClass,d.visible=!0},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$templateCache","uiGridConstants","$log","GridColumn",function(a,b,c,d,e,f){function g(){this.data=[],this.columnDefs=[],this.headerRowHeight=30,this.rowHeight=30,this.maxVisibleRowCount=200,this.columnWidth=50,this.maxVisibleColumnCount=200,this.virtualizationThreshold=20,this.columnVirtualizationThreshold=10,this.excessRows=4,this.scrollThreshold=4,this.excessColumns=4,this.horizontalScrollThreshold=2,this.enableNativeScrolling=!0,this.enableVirtualScrolling=!1,this.enableColumnResizing=!1,this.minimumColumnSize=10,this.rowEquality=function(a,b){return a===b},this.headerTemplate=null}function h(a,b){this.entity=a,this.index=b}var i={createGrid:function(){var b=new j(a.newId());return b.registerColumnBuilder(i.defaultColumnBuilder),b},defaultColumnBuilder:function(e,f){var g=[];return f.headerCellTemplate=e.headerCellTemplate||c.get("ui-grid/uiGridHeaderCell"),f.cellTemplate=e.cellTemplate||c.get("ui-grid/uiGridCell").replace(d.CUSTOM_FILTERS,f.cellFilter?"|"+f.cellFilter:""),e.cellTemplate&&!d.TEMPLATE_REGEXP.test(e.cellTemplate)&&g.push(a.getTemplate(e.cellTemplate).then(function(a){f.cellTemplate=a})),e.headerCellTemplate&&!d.TEMPLATE_REGEXP.test(e.headerCellTemplate)&&g.push(a.getTemplate(e.headerCellTemplate).then(function(a){f.headerCellTemplate=a})),b.all(g)}},j=function(a){if(this.id=a,this.options=new g,this.headerHeight=this.options.headerRowHeight,this.gridHeight=0,this.gridWidth=0,this.columnBuilders=[],this.rowBuilders=[],this.styleComputations=[],!this.options.enableNativeScrolling&&!this.options.enableVirtualScrolling)throw"Either native or virtual scrolling must be enabled.";this.rows=[],this.columns=[],this.renderedRows=[],this.renderedColumns=[]};return j.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},j.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},j.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},j.prototype.buildColumns=function(){e.debug("buildColumns");var a=this,c=[];return a.options.columnDefs.forEach(function(b,d){a.preprocessColDef(b);var e=a.getColumn(b.name);e?e.updateColumnDef(b,e.index):(e=new f(b,d),a.columns.push(e)),a.columnBuilders.forEach(function(d){c.push(d.call(a,b,e,a.options))})}),b.all(c)},j.prototype.preprocessColDef=function(a){if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");void 0===a.name&&void 0!==a.field&&(a.name=a.field)},j.prototype.modifyRows=function(a){var b=this;if(0===b.rows.length&&a.length>0)return void b.addRows(a);var c=a.filter(function(a){return!b.rows.some(function(c){return b.options.rowEquality(c.entity,a)})});for(e=0;e<c.length;e++)b.addRows([c[e]]);for(var d=b.rows.filter(function(c){return!a.some(function(a){return b.options.rowEquality(a,c.entity)})}),e=0;e<d.length;e++)b.rows.splice(b.rows.indexOf(d[e]),1)},j.prototype.addRows=function(a){for(var b=this,c=0;c<a.length;c++)b.rows.push(b.processRowBuilders(new h(a[c],c)))},j.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.gridOptions)}),a},j.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},j.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},j.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b]},j.prototype.buildStyles=function(a){var b=this;b.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(c){c.func.call(b,a)})},j.prototype.minRowsToRender=function(){return Math.ceil(this.getViewportHeight()/this.options.rowHeight)},j.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},j.prototype.getBodyHeight=function(){var a=this.getViewportHeight();return"undefined"!=typeof this.horizontalScrollbarHeight&&void 0!==this.horizontalScrollbarHeight&&this.horizontalScrollbarHeight>0&&(a+=this.horizontalScrollbarHeight),a},j.prototype.getViewportHeight=function(){var a=this.gridHeight-this.headerHeight;return"undefined"!=typeof this.horizontalScrollbarHeight&&void 0!==this.horizontalScrollbarHeight&&this.horizontalScrollbarHeight>0&&(a-=this.horizontalScrollbarHeight),a},j.prototype.getViewportWidth=function(){var a=this.gridWidth;return"undefined"!=typeof this.verticalScrollbarWidth&&void 0!==this.verticalScrollbarWidth&&this.verticalScrollbarWidth>0&&(a-=this.verticalScrollbarWidth),a},j.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return"undefined"!=typeof this.verticalScrollbarWidth&&void 0!==this.verticalScrollbarWidth&&this.verticalScrollbarWidth>0&&(a+=this.verticalScrollbarWidth),a},j.prototype.getCanvasHeight=function(){var a=this.options.rowHeight*this.rows.length;return"undefined"!=typeof this.horizontalScrollbarHeight&&void 0!==this.horizontalScrollbarHeight&&this.horizontalScrollbarHeight>0&&(a-=this.horizontalScrollbarHeight),a},j.prototype.getCanvasWidth=function(){var a=this.canvasWidth;return"undefined"!=typeof this.verticalScrollbarWidth&&void 0!==this.verticalScrollbarWidth&&this.verticalScrollbarWidth>0&&(a-=this.verticalScrollbarWidth),a},j.prototype.getTotalRowHeight=function(){return this.options.rowHeight*this.rows.length},j.prototype.isScrolling=function(){return this.scrolling?!0:!1},j.prototype.setScrolling=function(a){this.scrolling=a},h.prototype.getQualifiedColField=function(a){return"row.entity."+a.field},h.prototype.getEntityQualifiedColField=function(a){return"entity."+a.field},i}])}(),function(){function a(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,f){var g=!0,h="width"===d?c.offsetWidth:c.offsetHeight,i=a(c),j="border-box"===i.boxSizing;if(0>=h||null==h){if(h=i[d],(0>h||null==h)&&(h=c.style[d]),e.test(h))return h;g=j&&!0,h=parseFloat(h)||0}var k=h+b(c,d,f||(j?"border":"content"),g,i);return k}var d=angular.module("ui.grid"),e=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),f=/^(block|none|table(?!-c[ea]).+)/,g={position:"absolute",visibility:"hidden",display:"block"};d.service("gridUtil",["$window","$document","$http","$templateCache","$timeout",function(b,d,e,h,i){var j={readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/(\w+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a){var b=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];var c=a[0];return angular.forEach(c,function(a,c){b.push({name:c})}),b},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){return e({method:"GET",url:a,cache:h}).then(function(a){return a.data.trim()},function(b){throw"Could not get template "+a+": "+b})},elementWidth:function(){},elementHeight:function(){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c){var d,e,f=angular.element(a).clone()[0];for(e in b)f.style[e]=b[e];return angular.element(document.body).append(f),d=c.call(f,f),angular.element(f).remove(),d},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=-1*e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in b||b.DocumentTouch&&d instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},requestAnimationFrame:b.requestAnimationFrame&&b.requestAnimationFrame.bind(b)||b.webkitRequestAnimationFrame&&b.webkitRequestAnimationFrame.bind(b)||function(a){return i(a,10,!1)},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b}};return["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);j["element"+d]=function(d,e){var h=d;if("undefined"!=typeof h.length&&h.length&&(h=d[0]),h){var i=a(h);return 0===h.offsetWidth&&f.test(i.display)?j.fakeElement(h,g,function(a){return c(a,b,e)}):c(h,b,e)}return null},j["outerElement"+d]=function(a,b){return a?j["element"+d].call(this,a,b?"margin":"border"):null}}),j}]),d.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"}}),a
}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{aggregate:{label:"eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrando:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"موردها"},groupPanel:{description:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز."},search:{placeholder:"جستجو...",showingItems:"نمایش موردها:",selectedItems:"موردهای انتخاب‌شده:",totalItems:"همهٔ موردها:",size:"اندازهٔ صفحه:",first:"صفحهٔ اول",next:"صفحهٔ بعد",previous:"صفحهٔ قبل",last:"آخرین صفحه"},menu:{text:"انتخاب ستون‌ها:"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{aggregate:{label:"articles"},groupPanel:{description:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne."},search:{placeholder:"Recherche...",showingItems:"Articles Affichage des:",selectedItems:"Éléments Articles:",totalItems:"Nombre total d'articles:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes:"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]: ",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase(),d=this._langs;d[c]=angular.copy(b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a?a:e.getCurrentLang();return d.get(b)},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};a.forEach(function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){var e=a(d);return e(b.get())||c.MISSING+d}};b.forEach(function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{aggregate:{label:"条目"},groupPanel:{description:"拖曳表头到此处以进行分组"},search:{placeholder:"搜索...",showingItems:"当前显示条目：",selectedItems:"选中条目：",totalItems:"条目总数：",size:"每页显示数：",first:"回到首页",next:"下一页",previous:"上一页",last:"前往尾页"},menu:{text:"数据分组与选择列："}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"筆"},groupPanel:{description:"拖拉表頭到此處以進行分組"},search:{placeholder:"搜尋...",showingItems:"目前顯示筆數：",selectedItems:"選取筆數：",totalItems:"總筆數：",size:"每頁顯示：",first:"第一頁",next:"下一頁",previous:"上一頁",last:"最後頁"},menu:{text:"選擇欄位："}}),a}])}])}(),function(){"use strict";function a(a,b){this.row=a,this.col=b}var b=angular.module("ui.grid.cellNav",["ui.grid"]);b.constant("uiGridCellNavConstants",{CELL_NAV_EVENT:"uiGridCellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3}}),b.service("uiGridCellNavService",["$log","uiGridConstants","uiGridCellNavConstants","$q",function(b,c,d,e){var f={getDirection:function(a){return a.keyCode===c.keymap.LEFT||a.keyCode===c.keymap.TAB&&a.shiftKey?d.direction.LEFT:a.keyCode===c.keymap.RIGHT||a.keyCode===c.keymap.TAB?d.direction.RIGHT:a.keyCode===c.keymap.UP||a.keyCode===c.keymap.ENTER&&a.shiftKey?d.direction.UP:a.keyCode===c.keymap.DOWN||a.keyCode===c.keymap.ENTER?d.direction.DOWN:null},getNextRowCol:function(a,b,c,e){switch(a){case d.direction.LEFT:return f.getRowColLeft(b.rows,b.columns,c,e);case d.direction.RIGHT:return f.getRowColRight(b.rows,b.columns,c,e);case d.direction.UP:return f.getRowColUp(b.rows,b.columns,c,e);case d.direction.DOWN:return f.getRowColDown(b.rows,b.columns,c,e)}},getRowColLeft:function(b,c,d,e){var g=f.getNextColIndexLeft(c,e);return g>e.index?0===d.index?new a(d,c[g]):new a(b[d.index-1],c[g]):new a(d,c[g])},getRowColRight:function(b,c,d,e){var g=f.getNextColIndexRight(c,e);return g<e.index?d.index===b.length-1?new a(d,c[g]):new a(b[d.index+1],c[g]):new a(d,c[g])},getNextColIndexLeft:function(a,b){for(var c=0===b.index?a.length-1:b.index-1;c!==b.index&&!a[c].allowCellFocus;)c--,-1===c&&(c=a.length-1);return c},getNextColIndexRight:function(a,b){for(var c=b.index===a.length-1?0:b.index+1;c!==b.index&&!a[c].allowCellFocus;)c++,c>a.length-1&&(c=0);return c},getRowColUp:function(b,c,d,e){var g=e.allowCellFocus?e.index:f.getNextColIndexRight(c,e);return 0===d.index?new a(d,c[g]):new a(b[d.index-1],c[g])},getRowColDown:function(b,c,d,e){var g=e.allowCellFocus?e.index:f.getNextColIndexRight(c,e);return d.index===b.length-1?new a(d,c[g]):new a(b[d.index+1],c[g])},cellNavColumnBuilder:function(a,b){var c=[];return b.allowCellFocus=void 0!==a.allowCellFocus?a.allowCellFocus:!0,e.all(c)}};return f}]),b.directive("uiGridCellnav",["$log","uiGridCellNavService","uiGridCellNavConstants",function(a,b,c){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,d,e,f){f.grid.registerColumnBuilder(b.cellNavColumnBuilder),f.broadcastCellNav=function(b){a.$broadcast(c.CELL_NAV_EVENT,b)}},post:function(){}}}}}]),b.directive("uiGridCell",["uiGridCellNavService","$log","uiGridCellNavConstants",function(a,b,c){return{priority:-150,restrict:"A",require:"^uiGrid",scope:!1,link:function(d,e,f,g){function h(){e.find("div").attr("tabindex",-1)}function i(){var a=e.find("div");a.focus(),a.attr("tabindex",0)}d.col.allowCellFocus&&(h(),e.on("keydown",function(c){var e=a.getDirection(c);if(null===e)return!0;var f=a.getNextRowCol(e,d.grid,d.row,d.col);return b.debug("next row "+f.row.index+" next Col "+f.col.colDef.name),g.broadcastCellNav(f),h(),!1}),d.$on(c.CELL_NAV_EVENT,function(a,c){c.row===d.row&&c.col===d.col&&(b.debug("Setting focus on Row "+c.row.index+" Col "+c.col.colDef.name),i())}))}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$log","$q","$templateCache","uiGridConstants",function(a,b,c,d){var e={isStartEditKey:function(a){return a.keyCode===d.keymap.LEFT||a.keyCode===d.keymap.TAB&&a.shiftKey||a.keyCode===d.keymap.RIGHT||a.keyCode===d.keymap.TAB||a.keyCode===d.keymap.UP||a.keyCode===d.keymap.ENTER&&a.shiftKey||a.keyCode===d.keymap.DOWN||a.keyCode===d.keymap.ENTER?!1:!0},editColumnBuilder:function(a,d,e){var f=[];return d.enableCellEdit=void 0!==a.enableCellEdit?a.enableCellEdit:e.enableCellEdit,d.cellEditableCondition=a.cellEditableCondition||e.cellEditableCondition||"true",d.enableCellEdit&&(d.editableCellTemplate=a.editableCellTemplate||c.get("ui-grid/editableCell"),d.editableCellDirective=a.editableCellDirective||"ui-grid-text-editor"),d.enableCellEditOnFocus=void 0!==a.enableCellEditOnFocus?a.enableCellEditOnFocus:e.enableCellEditOnFocus,b.all(f)}};return e}]),a.directive("uiGridEdit",["$log","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){e.grid.registerColumnBuilder(b.editColumnBuilder)},post:function(){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridEditConstants","$log","$parse","uiGridEditService",function(a,b,c,d,e,f){return{priority:-100,restrict:"A",scope:!1,link:function(d,g){function h(){g.on("dblclick",l),g.on("keydown",k),d.col.enableCellEditOnFocus&&g.find("div").on("focus",j)}function i(){g.off("dblclick",l),g.off("keydown",k),d.col.enableCellEditOnFocus&&g.find("div").off("focus",j)}function j(a){a.stopPropagation(),l()}function k(a){f.isStartEditKey(a)&&l()}function l(){q=e(d.row.getQualifiedColField(d.col)),p=q(d),o=d.col.editableCellTemplate,o=o.replace(c.EDITABLE_CELL_DIRECTIVE,d.col.editableCellDirective);var f;d.$apply(function(){r=!0,i(),f=a(o)(d.$new()),angular.element(g.children()[0]).addClass("ui-grid-cell-contents-hidden"),g.append(f)});var h=d.$on(b.events.GRID_SCROLL,function(){m(),h()}),j=d.$on(c.events.END_CELL_EDIT,function(){m(),j()}),k=d.$on(c.events.CANCEL_CELL_EDIT,function(){n(),k()});d.$broadcast(c.events.BEGIN_CELL_EDIT)}function m(){r&&(angular.element(g.children()[1]).remove(),angular.element(g.children()[0]).removeClass("ui-grid-cell-contents-hidden"),r=!1,h())}function n(){r&&(q.assign(d,p),d.$apply(),m())}if(d.col.colDef.enableCellEdit){var o,p,q,r=!1;h()}}}}]),a.directive("uiGridTextEditor",["uiGridConstants","uiGridEditConstants","$log","$templateCache","$compile",function(a,b,c,d,e){return{scope:!0,compile:function(){return{pre:function(){},post:function(c,f){var g=d.get("ui-grid/cellTextEditor");g=g.replace(a.COL_FIELD,c.row.getQualifiedColField(c.col));var h=e(g)(c);f.append(h);var i=f.find("input");c.$on(b.events.BEGIN_CELL_EDIT,function(){i[0].focus(),i[0].select(),i.on("blur",function(){c.stopEdit()})}),c.stopEdit=function(){c.$emit(b.events.END_CELL_EDIT)},f.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT);break;case a.keymap.ENTER:c.stopEdit()}return!0})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$log","$templateCache","$compile","$q",function(a,b,c,d){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,e,f,g){if(g.grid.options.enableColumnResizing){var h=d.defer();f.$observe("renderIndex",function(b){a.renderIndex=a.$eval(b),h.resolve()}),h.promise.then(function(){var d=b.get("ui-grid/columnResizer"),f=angular.element(d).clone(),h=angular.element(d).clone();f.attr("position","left"),h.attr("position","right");var i=(a.col,g.grid.renderedColumns[a.renderIndex-1]);0!==a.col.index&&i.colDef.enableColumnResizing!==!1&&e.prepend(f),a.col.colDef.enableColumnResizing!==!1&&e.append(h),c(f)(a),c(h)(a)})}}}}}}]);var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.constant("columnBounds",{minWidth:35}),a.directive("uiGridColumnResizer",["$log","$document","gridUtil","uiGridConstants","columnBounds",function(a,b,c,d,e){var f=angular.element('<div class="ui-grid-resize-overlay"></div>'),g={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(a,d,g,h){function i(a){h.grid.columns.forEach(function(b){if(b.index!==a.index){var c=b.colDef;(!c.width||angular.isString(c.width)&&(-1!==c.width.indexOf("*")||-1!==c.width.indexOf("%")))&&(c.width=b.drawnWidth)}})}function j(a){h.grid.buildColumns().then(function(){h.refreshCanvas(!0).then(function(){if(h.grid.options.enableVirtualScrolling){var b=h.prevScrollArgs?h.prevScrollArgs:{x:{percentage:0}};if(b.target=d,a&&b.x&&b.x.pixels){var c=a/h.grid.getHeaderViewportWidth();b.x.percentage=b.x.percentage-c,b.x.percentage>1?b.x.percentage=1:b.x.percentage<0&&(b.x.percentage=0)}h.fireScrollingEvent(b)}})})}function k(b){b.originalEvent&&(b=b.originalEvent),b.preventDefault(),n=b.clientX-o,0>n?n=0:n>h.grid.gridWidth&&(n=h.grid.gridWidth);var c,d=a.col;if("left"===a.position?(d=h.grid.renderedColumns[a.renderIndex-1],c=a.col):"right"===a.position&&(c=h.grid.renderedColumns[a.renderIndex+1]),d.colDef.enableColumnResizing!==!1){h.grid.element.hasClass("column-resizing")||h.grid.element.addClass("column-resizing");var g=n-m,i=d.drawnWidth+g;d.colDef.minWidth&&i<d.colDef.minWidth?n+=d.colDef.minWidth-i:!d.colDef.minWidth&&e.minWidth&&i<e.minWidth?n+=d.colDef.minWidth-i:d.colDef.maxWidth&&i>d.colDef.maxWidth&&(n+=d.colDef.maxWidth-i),f.css({left:n+"px"})}}function l(c){c.originalEvent&&(c=c.originalEvent),c.preventDefault(),h.grid.element.removeClass("column-resizing"),f.remove(),n=c.clientX-o;var d=n-m;if(0===d)return b.off("mouseup",l),void b.off("mousemove",k);var g,p=a.col;if("left"===a.position?(p=h.grid.renderedColumns[a.renderIndex-1],g=a.col):"right"===a.position&&(g=h.grid.renderedColumns[a.renderIndex+1]),p.colDef.enableColumnResizing!==!1){var q=p.drawnWidth+d;p.colDef.minWidth&&q<p.colDef.minWidth?q=p.colDef.minWidth:!p.colDef.minWidth&&e.minWidth&&q<e.minWidth&&(q=e.minWidth),p.colDef.maxWidth&&q>p.colDef.maxWidth&&(q=p.colDef.maxWidth),p.colDef.width=q,i(p),j(d),b.off("mouseup",l),b.off("mousemove",k)}}var m=0,n=0,o=0;"left"===a.position?d.addClass("left"):"right"===a.position&&d.addClass("right"),d.on("mousedown",function(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),o=h.grid.element[0].offsetLeft,m=a.clientX-o,h.grid.element.append(f),f.css({left:m}),b.on("mouseup",l),b.on("mousemove",k)}),d.on("dblclick",function(){var b,d,f=a.col;"left"===a.position?(f=h.grid.renderedColumns[a.renderIndex-1],b=a.col,d=1):"right"===a.position&&(b=h.grid.renderedColumns[a.renderIndex+1],d=-1);var g=0,k=0,l=h.grid.element[0].querySelectorAll(".col"+f.index);Array.prototype.forEach.call(l,function(a){c.fakeElement(a,{},function(a){angular.element(a).attr("style","float: left");var b=c.elementWidth(a);b>g&&(g=b,k=g-b)})}),f.colDef.minWidth&&g<f.colDef.minWidth?g=f.colDef.minWidth:!f.colDef.minWidth&&e.minWidth&&g<e.minWidth&&(g=e.minWidth),f.colDef.maxWidth&&g>f.colDef.maxWidth&&(g=f.colDef.maxWidth),f.colDef.width=g,i(f),j(k)}),d.on("$destroy",function(){d.off("mousedown"),d.off("dblclick"),b.off("mousemove",k),b.off("mouseup",l)})}};return g}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-body",'<div class="ui-grid-body"><div class="ui-grid-scrollbar-box"><div ui-grid-viewport="" class="ui-grid-viewport"><div class="ui-grid-canvas"><div ng-repeat="row in grid.renderedRows track by $index" class="ui-grid-row" ng-style="rowStyle($index)"><div ui-grid-row="row" row-index="row.index"></div></div></div></div></div><!-- native scrolling --><div ui-grid-native-scrollbar="" ng-if="!grid.options.enableVirtualScrolling && grid.options.enableNativeScrolling" type="vertical"></div><div ui-grid-native-scrollbar="" ng-if="!grid.options.enableVirtualScrolling && grid.options.enableNativeScrolling" type="horizontal"></div><!-- virtual scrolling --><div ui-grid-scrollbar="" ng-if="grid.options.enableVirtualScrolling" type="vertical" scrolling-class="ui-grid-scrolling"></div><div ui-grid-scrollbar="" ng-if="grid.options.enableVirtualScrolling" type="horizontal" scrolling-class="ui-grid-scrolling"></div></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div class="ui-grid-top-panel"><div ui-grid-group-panel="" ng-show="grid.options.showGroupPanel"></div><div class="ui-grid-header ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div ng-repeat="col in grid.renderedColumns track by $index" ui-grid-header-cell="" col="col" render-index="$index" ng-style="$index === 0 && columnStyle($index)"><!-- class="ui-grid-header-cell col{{ col.index }}" ng-style="$index === 0 && columnStyle($index)" --><!-- <div ng-if="grid.options.enableColumnResizing && col.index != 0" class="ui-grid-column-resizer" ui-grid-column-resizer col="col" position="left" render-index="$index">&nbsp;</div>\n\n          <div class="ui-grid-vertical-bar">&nbsp;</div>\n          <div class="ui-grid-cell-contents" col-index="$index">{{ col.displayName }}</span></div>\n\n          <div ng-if="grid.options.enableColumnResizing && col.index != grid.renderedColumns.length - 1" class="ui-grid-column-resizer" ui-grid-column-resizer col="col" position="right"  render-index="$index">&nbsp;</div> --></div></div></div><div ui-grid-menu=""></div></div>'),a.put("ui-grid/ui-grid-row",'<div><div ng-repeat="col in grid.renderedColumns track by $index" class="ui-grid-cell col{{ col.index }}"><div class="ui-grid-vertical-bar">&nbsp;</div><div ui-grid-cell="" col="col" row="row" row-index="row.index" col-index="col.colDef.index"></div></div>'),a.put("ui-grid/ui-grid-scrollbar",'<div class="ui-grid-scrollbar" ng-show="showScrollbar()"></div>'),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid grid{{ grid.id }}"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style="">.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-header {\n      width: {{ grid.getHeaderViewportWidth() }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-header-canvas {\n      width: {{ grid.getCanvasWidth() }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-body {\n      height: {{ grid.getBodyHeight() }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-viewport {\n      height: {{ grid.getViewportHeight() }}px;\n      width: {{ grid.getViewportWidth() }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-canvas {\n      height: {{ grid.getCanvasHeight() }}px;\n      width: {{ grid.getCanvasWidth() }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ rowStyles }}\n\n    {{ columnStyles }}\n\n    /*.grid{{ grid.id }} .ui-grid-body .ui-grid-cell:first-child, .grid{{ grid.id }} .ui-grid-header .ui-grid-header-cell:first-child {\n      margin-left: {{ grid.columnOffset || 0 }}px;\n    }*/\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    {{ grid.nativeVerticalScrollbarStyles }}\n    {{ grid.nativeHorizontalScrollbarStyles }}\n\n    .grid{{ grid.id }} .ui-grid-native-scrollbar.vertical {\n      height: {{ grid.getViewportHeight() }}px;\n    }</style><div ui-grid-header=""></div><div ui-grid-body=""></div><div ui-grid-footer=""></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridHeaderCell",'<div class="ui-grid-header-cell col{{ col.index }}"><div class="ui-grid-vertical-bar">&nbsp;</div><div class="ui-grid-cell-contents" col-index="renderIndex">{{ col.displayName }}</div></div>'),a.put("ui-grid/cellTextEditor",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD">'),a.put("ui-grid/editableCell",'<div editable_cell_directive=""></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer="" ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex"></div>')}]);